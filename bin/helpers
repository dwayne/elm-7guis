#!/usr/bin/env bash

set -e

src_dir="$project"
web_root="${web_root%/}"
dest_dir="$build$web_root"

clean () {
  rm -rf "$build"
}

prepare_dest_dir () {
  mkdir -p "$dest_dir"
}

build_html () {
  cp "$src_dir"/html/*.html "$dest_dir"
}

build_css () {
  cp -r "$src_dir/css" "$dest_dir"
}

build_images () {
  cp -r "$src_dir/images" "$dest_dir"
}

build_js () {
  js_dest_dir="$dest_dir/js"

  mkdir -p "$js_dest_dir"

  elm make "$src_dir/src/Counter.elm" --debug --output "$js_dest_dir/counter.js"
  elm make "$src_dir/src/TemperatureConverter.elm" --debug --output "$js_dest_dir/temperature-converter.js"
  elm make "$src_dir/src/FlightBooker.elm" --debug --output "$js_dest_dir/flight-booker.js"
  elm make "$src_dir/src/Timer.elm" --debug --output "$js_dest_dir/timer.js"
  elm make "$src_dir/src/Crud.elm" --debug --output "$js_dest_dir/crud.js"
}
